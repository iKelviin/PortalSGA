
<div class="container">
    <mat-toolbar style="background-color: #f4f7fa;">Lista de Empresas</mat-toolbar>
  
    <div class="d-flex align-items-center justify-content-start">
  
    <mat-form-field class="me-5">
      <mat-label>Pesquisar</mat-label>
      <input matInput (keyup)="applyFilter($event)" #input>
      <button matSuffix mat-icon-button  style="color: #01326F;">
        <mat-icon class="search-icon" *ngIf="value != ''; else elseBlock" (click)="value=''">close</mat-icon>
        <ng-template #elseBlock>
          <mat-icon class="search-icon">search</mat-icon>
        </ng-template>
      </button>
    </mat-form-field>
      <button mat-mini-fab color="primary"
        (click)="openAddEditDialog(add, {})" matTooltip="Adicionar">
        <mat-icon>add</mat-icon>
      </button>
  
      <button mat-mini-fab color="primary" class="ms-3"
        (click)="openDeleteDialog(selection.selected.length, selection.selected)"
        [disabled]="!selection.hasValue()" matTooltip="Desativar">
        <mat-icon>delete</mat-icon>
      </button>
  
      <button mat-mini-fab style="background: green;" matTooltip="Exportar"  class="ms-3">
        <mat-icon>save_alt</mat-icon>
      </button>
  
      <!--button mat-mini-fab class="ms-3" color="primary"  matTooltip="Show/Hide columns">
        <mat-icon>remove_red_eye</mat-icon>
      </button-->
  
      <div class="mat-elevation-z5">
        <div class="conteiner-filtros">
          <span>Filtros:</span>
          <mat-radio-group>
            <mat-radio-button color="primary" checked="true" value="ativos" >Ativos</mat-radio-button>
            <mat-radio-button color="primary" value="inativos" >Inativos</mat-radio-button>
            <mat-radio-button color="primary" value="todos" >Todos</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
  
  
    </div>
  
    <div  [@animation] class="row justify-content-around  mb-3">
      <div class="col-md-2" *ngFor="let item of checkBoxList">
        <mat-checkbox color="primary" (change)="hideColumn($event, item.def)" [checked]="item.hide">
          {{ item.label }}
        </mat-checkbox>
      </div>
    </div>
  
  
  <div class="">
  
      <table mat-table matTableExporter [dataSource]="dataSource" matSort class="mat-elevation-z8">
  
        <!-- Checkbox Column -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox color="primary" (change)="$event ? toggleAllRows() : null"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                      disabled="true"
                      >
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox color="primary" (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)"
                      >
        </mat-checkbox>
      </td>
    </ng-container>
  
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
          <td mat-cell *matCellDef="let empresa"> {{empresa.id}} </td>
        </ng-container>
  
        <ng-container matColumnDef="nome">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Nome </th>
          <td mat-cell *matCellDef="let empresa"> {{empresa.nome}} </td>
        </ng-container>
  
        <ng-container matColumnDef="nomeAbreviado">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Nome Abreviado </th>
          <td mat-cell *matCellDef="let empresa"> {{empresa.nomeAbreviado}} </td>
        </ng-container>
  
        <ng-container matColumnDef="descricao">
          <th mat-header-cell *matHeaderCellDef> Descrição </th>
          <td mat-cell *matCellDef="let empresa"> {{empresa.descricao}} </td>
        </ng-container>
  
        <ng-container matColumnDef="ativo">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let empresa"> {{empresa.ativo ? 'Ativo' : 'Inativo' }} </td>
        </ng-container>
  
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Ação</th>
          <td mat-cell *matCellDef="let empresa">
  
            <button mat-icon-button color="primary" (click)="openAddEditDialog(edit, empresa)" matTooltip="Editar">
              <mat-icon>edit</mat-icon>
            </button>
  
            <button mat-icon-button color="primary" (click)="openDeleteDialog(1, empresa)" matTooltip="Desativar">
              <mat-icon style="color: rgb(255, 60, 60);">delete</mat-icon>
            </button>
  
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="colunasTabela"></tr>
        <tr mat-row *matRowDef="let row; columns: colunasTabela;"
        (click)="selection.toggle(row)">
        </tr>
  
      </table>
  
      <mat-card *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center">
        <mat-progress-spinner color="primary" mode="indeterminate">
        </mat-progress-spinner>
      </mat-card>
  
    <mat-paginator class="mat-elevation-z8" [pageSizeOptions]="[10, 20 ,50]" showFirstLastButtons></mat-paginator>
  
  </div>
  
  
  </div>
  