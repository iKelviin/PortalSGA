<mat-card class="p-4" style="max-width: 50rem;">

    <mat-card-header>
      <span mat-card-avatar class="material-symbols-outlined">domain</span>
      <mat-card-title>{{action}} Empresa</mat-card-title>
    </mat-card-header>

    <mat-divider></mat-divider>
  
    <form class="mt-4 needs-validation" novalidate (ngSubmit)="onSubmit()" [formGroup]="tableForm" role="form">
      <mat-card-content>
        <div class="row">
          <div class="col-md-6">
            <div class="mb-2">    
              <label for="validationCustom01" class="form-label">Nome da Empresa*</label>          
              <input type="text" class="form-control mat-elevation-z1" formControlName="nome" placeholder="Nome da Empresa" aria-label="nome" required
              [ngClass]="{'is-invalid': tableForm.get('nome')?.touched && tableForm.get('nome')?.hasError('required'),'is-valid': tableForm.get('nome')?.touched && tableForm.get('nome')?.valid}">                           
              <div class="invalid-feedback" *ngIf="tableForm.get('nome')?.touched && tableForm.get('nome')?.hasError('required')">O <strong>Nome da Empresa</strong> é obrigatório.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-2">
              <label class="form-label">Email*</label>
              <input required type="email" class="form-control mat-elevation-z1" placeholder="name@example.com" formControlName="email" 
              [ngClass]="{'is-invalid': tableForm.get('email')?.touched && tableForm.get('email')?.hasError('invalidEmailPattern'),'is-valid': tableForm.get('email')?.touched && tableForm.get('email')?.valid}">                            
              <div *ngIf="tableForm.get('email')?.touched && tableForm.get('email')?.hasError('required')" class="invalid-feedback">O <strong>Email</strong> é obrigatório.</div>
              <div *ngIf="tableForm.get('email')?.hasError('invalidEmailPattern') && !tableForm.get('email')?.hasError('required')" class="invalid-feedback">O <strong>Email</strong> é inválido.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-2">
              <label class="form-label">Telefone</label>
              <input class="form-control mat-elevation-z1" placeholder="(00) 90000-0000" formControlName="telefone" type="tel"
              [ngClass]="{'is-invalid': tableForm.get('telefone')?.hasError('invalidTelefonePattern') && !tableForm.get('telefone')?.hasError('minlength'),'is-valid': tableForm.get('telefone')?.touched && tableForm.get('telefone')?.dirty}">                                          
              <div class="invalid-feedback" *ngIf="tableForm.get('telefone')?.hasError('invalidTelefonePattern') && !tableForm.get('telefone')?.hasError('minlength')">O <strong>Telefone</strong> é inválido.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-2">
              <label class="form-label">Cep*</label>
              <input required class="form-control mat-elevation-z1" placeholder="CEP" formControlName="cep" type="text" (change)="getEndereco()"
              [ngClass]="{'is-invalid': tableForm.get('cep')?.touched && tableForm.get('cep')?.hasError('required') || tableForm.get('cep')?.hasError('invalidCepPattern') || cepInvalido,
              'is-valid': tableForm.get('cep')?.touched && !tableForm.get('cep')?.hasError('invalidCepPattern') && !tableForm.get('cep')?.hasError('required') && !cepInvalido}">              
              <div class="invalid-feedback" *ngIf="tableForm.get('cep')?.touched && tableForm.get('cep')?.hasError('required')">O <strong>Cep</strong> é obrigatório.</div>
              <div class="invalid-feedback" *ngIf="tableForm.get('cep')?.hasError('invalidCepPattern') && !tableForm.get('cep')?.hasError('minlength')">O <strong>cep</strong> é inválido.</div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="mb-2">
              <label class="form-label">Endereço*</label>              
              <input required class="form-control mat-elevation-z1" placeholder="Endereço" formControlName="endereco" type="text"
              [ngClass]="{'is-invalid': tableForm.get('endereco')?.touched && tableForm.get('endereco')?.hasError('required'),'is-valid':tableForm.get('endereco')?.touched && tableForm.get('endereco')?.valid}">                                         
              <div class="invalid-feedback" *ngIf="tableForm.get('endereco')?.touched && tableForm.get('endereco')?.hasError('required')">O <strong>Endereço</strong> é obrigatório.</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-2">
              <label class="form-label">Bairro*</label>
              <input required class="form-control mat-elevation-z1" placeholder="Bairro" formControlName="bairro" type="text"
              [ngClass]="{'is-invalid': tableForm.get('bairro')?.touched && tableForm.get('bairro')?.hasError('required'),'is-valid':tableForm.get('bairro')?.touched && tableForm.get('bairro')?.valid}">                                          
              <div class="invalid-feedback" *ngIf="tableForm.get('bairro')?.touched && tableForm.get('bairro')?.hasError('required')">O <strong>Bairro</strong> é obrigatório.</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-2">
              <label class="form-label">Cidade*</label>
              <input required class="form-control mat-elevation-z1" placeholder="Cidade" formControlName="cidade" type="text"
              [ngClass]="{'is-invalid': tableForm.get('cidade')?.touched && tableForm.get('cidade')?.hasError('required'),'is-valid': tableForm.get('cidade')?.touched && tableForm.get('cidade')?.valid}">                                                               
              <div class="invalid-feedback" *ngIf="tableForm.get('cidade')?.touched && tableForm.get('cidade')?.hasError('required')">A <strong>Cidade</strong> é obrigatória.</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-2">
              <label class="form-label">Estado*</label>
              <input required class="form-control mat-elevation-z1" placeholder="SP" formControlName="estado" type="text"
              [ngClass]="{'is-invalid': tableForm.get('estado')?.touched && tableForm.get('estado')?.hasError('required'),'is-valid': tableForm.get('estado')?.touched && tableForm.get('estado')?.valid}">                                                                                         
              <div class="invalid-feedback" *ngIf="tableForm.get('estado')?.touched && tableForm.get('estado')?.hasError('required')">O <strong>Estado</strong> é obrigatório.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-2">
              <label class="form-label">Numero</label>
              <input class="form-control mat-elevation-z1" placeholder="Número" formControlName="numero" type="text"
              [ngClass]="{'is-invalid': tableForm.get('numero')?.touched && tableForm.get('numero')?.invalid && tableForm.get('numero')?.hasError('pattern'),'is-valid': tableForm.get('numero')?.touched && !tableForm.get('numero')?.hasError('pattern') && tableForm.get('numero')?.invalid}">
              <div class="invalid-feedback" *ngIf="tableForm.get('numero')?.touched && tableForm.get('numero')?.invalid && tableForm.get('numero')?.hasError('pattern')">O <strong>Número</strong> é invalido.</div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-2">
              <label class="form-label">Complemento</label>
              <input class="form-control mat-elevation-z1" placeholder="Complemento" formControlName="complemento" type="text">                          
            </div>
          </div>          
        </div>
        <div class="row">
          <div class="mb-2">
            <div class="col-12">
                <mat-checkbox color="primary" class="w-100" formControlName="ativo">{{VerificaStatus()}}</mat-checkbox>
            </div>
          </div>
        </div>  
      </mat-card-content>
      <mat-divider></mat-divider>
      <mat-card-actions class="mt-3 align-items-center justify-content-end">
  
        <button mat-raised-button class="me-5" color="primary" [disabled]="tableForm.invalid">
          {{action}}
        </button>
  
        <button mat-raised-button color="primary" type="button" (click)="closeDialog()">
          Cancelar
        </button>
  
      </mat-card-actions>
  
    </form>
</mat-card>
  